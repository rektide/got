{"id":"got-config-gitwalk","title":"got-config-gitwalk: find nearest .git directory by walking up","description":"Implement directory tree walking to find nearest .git repository root.\n\n## Problem\n\nCurrent `nah::get_nah_path()` fallback logic:\n```rust\nlet repo = repo_path\n    .map(Path::to_path_buf)\n    .or_else(|| std::env::current_dir().ok())  // Uses current dir, not git root\n    .context(\"Cannot determine repository path\")?;\n```\n\nWhen run from a subdirectory, this doesn't find the actual repository root where `.git/nah` should be stored.\n\n## Solution\n\nImplement `find_git_root()` function that walks up the directory tree until finding `.git` directory.\n\n## Implementation\n\n```rust\nuse std::path::Path;\n\npub fn find_git_root(start: \u0026Path) -\u003e Option\u003cPathBuf\u003e {\n    let mut current = start.to_path_buf();\n    \n    loop {\n        if current.join(\".git\").exists() {\n            return Some(current);\n        }\n        \n        match current.parent() {\n            Some(parent) =\u003e current = parent.to_path_buf(),\n            None =\u003e return None,\n        }\n    }\n}\n\npub fn get_repo_path() -\u003e Result\u003cPathBuf\u003e {\n    find_git_root(\u0026std::env::current_dir()?)\n        .context(\"Not in a git repository\")\n}\n```\n\n## Integration\n\nUpdate `nah::get_nah_path()` to use `get_repo_path()`:\n```rust\npub fn get_nah_path(global: bool, repo_path: Option\u003c\u0026Path\u003e) -\u003e Result\u003cPathBuf\u003e {\n    if global {\n        Ok(xdg_git_nah())\n    } else {\n        let repo = repo_path\n            .map(Path::to_path_buf)\n            .unwrap_or_else(|| get_repo_path().unwrap());  // Use git root finding\n        Ok(repo.join(\".git\").join(\"nah\"))\n    }\n}\n```\n\n## Use Cases\n\n- `got nah pick` works from subdirectories\n- Repository root is correctly identified from any working tree location\n- Consistent with git behavior (git commands work from subdirectories)\n\n## Components\n\n- `/home/rektide/src/got/crate/gotconfig/src/paths.rs` - Add find_git_root()\n- `/home/rektide/src/got/crate/nah/src/ignore.rs` - Update get_nah_path()\n- Export new function from gotconfig\n\n## Benefits\n\n- Matches git's behavior of finding repository from subdirectories\n- More robust when running got from nested directories\n- Better user experience (works anywhere in repository)\n\n## Crosslink\n\nParent: got-nah","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-16T03:36:47.096456855-05:00","updated_at":"2026-01-16T03:36:47.096456855-05:00","dependencies":[{"issue_id":"got-config-gitwalk","depends_on_id":"got-nah","type":"blocks","created_at":"2026-01-16T03:36:47.371602821-05:00","created_by":"daemon"}]}
{"id":"got-enh","title":"got-enh: roadmap for got toolkit improvements","description":"Strategic improvements to expand got toolkit capabilities and ensure code quality. This epic organizes enhancement work across four main areas.\n\n## Enhancement Areas\n\n### 1. Testing (Priority: High)\nCore quality gate ensuring RepoIter stability and correctness.\n\n### 2. Feature Implementation (Priority: Medium)\nComplete gotsel TUI tool for interactive git staging.\n\n### 3. Documentation Cleanup (Priority: Low)\nArchive or remove temporary analysis files created during RepoIter design.\n\n### 4. Feature Expansion (Priority: Low)\nNice-to-have enhancements to RepoIter capabilities.\n\n## Success Criteria\n\n- RepoIter has comprehensive test suite covering all code paths\n- gotsel TUI is functional and documented\n- Temporary analysis files are properly archived or removed\n- RepoIter supports pathspec and gitignore filtering","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-16T03:07:38.553754041-05:00","updated_at":"2026-01-16T03:07:38.553754041-05:00"}
{"id":"got-enh-cleanup","title":"got-enh-cleanup: archive temporary analysis files","description":"Archive or remove temporary analysis files created during RepoIter design process.\n\n## Files to Process\n\nBased on evaluation results from general agent:\n\n### Keep as Historical Record (accurate analysis)\n- OWNERSHIP_MODEL_ANALYSIS.md - Documents Arc\u003cRepository\u003e decision\n- SUBDIR_FEATURE.md - Documents subdirectory implementation\n\n### Remove (outdated/inaccurate)\n- ITERATOR_MERGE_PLAN.md - Deviates from implementation (HashSet vs O(log n) lookups)\n- REPOITER_DESIGN.md - Multiple deviations (HashSet, Done variant, metadata approach)\n\n## Decision\n\nArchive accurate files to `doc/archive/` directory for historical reference. Remove inaccurate files to avoid confusion.\n\n## Components\n\n- doc/archive/ directory creation\n- File move operations\n- Documentation update (README.md references if any)\n\n## Crosslink\n\nParent: got-enh","status":"open","priority":4,"issue_type":"chore","created_at":"2026-01-16T03:07:51.66424946-05:00","updated_at":"2026-01-16T03:07:51.66424946-05:00","dependencies":[{"issue_id":"got-enh-cleanup","depends_on_id":"got-enh","type":"blocks","created_at":"2026-01-16T03:08:12.477105662-05:00","created_by":"daemon"}]}
{"id":"got-enh-gitignore","title":"got-enh-gitignore: respect .gitignore rules","description":"Add .gitignore filtering to RepoIter untracked file iteration.\n\n## Gitignore Features\n\n### Gitignore Rules Support\n- Standard .gitignore syntax\n- Glob patterns\n- Negation patterns\n- Pattern priority (later rules override earlier)\n- Global gitignore files (~/.config/git/ignore)\n- Repository .gitignore\n- Directory-specific .gitignore\n\n### Implementation Approach\n\n- Parse .gitignore files\n- Build ignore matcher\n- Filter untracked files in next_untracked()\n- Cache ignore state for performance\n\n### Components\n\n- Gitignore parser\n- Ignore matcher implementation\n- Integration with RepoIter untracked iteration\n- Cache invalidation on gitignore changes\n\n## Use Cases\n\n- Respect user's ignore preferences\n- Avoid iterating over build artifacts\n- Filter node_modules, target/, etc.\n\n## Crosslink\n\nParent: got-enh","status":"open","priority":4,"issue_type":"feature","created_at":"2026-01-16T03:08:06.602113394-05:00","updated_at":"2026-01-16T03:08:06.602113394-05:00","dependencies":[{"issue_id":"got-enh-gitignore","depends_on_id":"got-enh","type":"blocks","created_at":"2026-01-16T03:08:12.980960155-05:00","created_by":"daemon"}]}
{"id":"got-enh-gotsel","title":"got-enh-gotsel: interactive TUI for git staging","description":"Implement interactive TUI tool for git staging with date-of-modification sorted UI.\n\n## Components\n\n### gotsel Architecture\n- Terminal UI library selection (crossterm/ratatui)\n- File tree display with cursor navigation\n- File selection and toggling (staged/unstaged)\n- Date-sorted by default (oldest first)\n- Visual status indicators (modified, added, deleted, untracked)\n\n### User Interactions\n- Arrow keys: navigate file tree\n- Space/Enter: toggle file staging status\n- 'q': quit\n- 'c': commit staged changes\n- Help screen: show key bindings\n\n### Integration\n- Uses RepoIter with include_metadata for sorting\n- Executes git add/restore commands\n- Integrates with commit workflow\n\n### Use Cases\n- Interactive staging before commit\n- Review changes sorted by modification time\n- Partial staging of specific files\n\n## Components\n\n- TUI rendering and event loop\n- File tree data structure\n- RepoIter integration\n- Git command execution (add, restore)\n- Status display logic\n\n## Crosslink\n\nParent: got-enh","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-16T03:07:49.165533052-05:00","updated_at":"2026-01-16T03:07:49.165533052-05:00","dependencies":[{"issue_id":"got-enh-gotsel","depends_on_id":"got-enh","type":"blocks","created_at":"2026-01-16T03:08:12.038292225-05:00","created_by":"daemon"}]}
{"id":"got-enh-pathspec","title":"got-enh-pathspec: git-style path filtering","description":"Add git-style pathspec filtering to RepoIter for flexible file matching.\n\n## Pathspec Features\n\n### Basic Pathspec Patterns\n- Literal path matching: \"src/main.rs\"\n- Glob patterns: \"*.rs\", \"src/**/*.md\"\n- Directory patterns: \"src/\"\n\n### Pathspec Operators\n- Negation: \":!target\"\n- Character classes: \"src/*.[ch]\"\n- Leading slash: \"/.gitignore\" (anchor to repo root)\n- Recursive: \"**/*.rs\"\n\n### API Addition\n```rust\nimpl RepoIterBuilder {\n    pub fn pathspec(mut self, patterns: Vec\u003cString\u003e) -\u003e Self {\n        // Filter by git-style pathspec patterns\n    }\n}\n```\n\n## Components\n\n- Pathspec parser\n- Pathspec matcher implementation\n- Integration with RepoIter filters\n- Update builder API\n\n## Use Cases\n\n- Iterate only files matching specific patterns\n- Exclude certain directories/files\n- Complex matching rules\n\n## Crosslink\n\nParent: got-enh","status":"open","priority":4,"issue_type":"feature","created_at":"2026-01-16T03:07:57.237746134-05:00","updated_at":"2026-01-16T03:07:57.237746134-05:00","dependencies":[{"issue_id":"got-enh-pathspec","depends_on_id":"got-enh","type":"blocks","created_at":"2026-01-16T03:08:12.833380628-05:00","created_by":"daemon"}]}
{"id":"got-enh-test","title":"got-enh-test: comprehensive RepoIter test suite","description":"Add comprehensive test coverage for RepoIter to ensure stability and correctness across all code paths.\n\n## Test Areas\n\n### Mode Testing\n- Test IterMode::Tracked (only tracked files)\n- Test IterMode::Untracked (only untracked files)\n- Test IterMode::Both (both tracked and untracked)\n\n### Filtering\n- Test status filtering by StatusChar (Modified, Added, Deleted, etc.)\n- Test custom filter predicates\n- Test multiple status types in filter vector\n\n### Metadata\n- Test include_metadata=true returns FileMetadata\n- Test include_metadata=false returns None\n- Test metadata accuracy (modified_time, size)\n\n### Subdirectory\n- Test subdir() limits iteration to specific directory\n- Test subdir() filters both index entries and filesystem traversal\n- Test subdir() works with different IterMode values\n\n### Edge Cases\n- Empty repository (no HEAD tree)\n- Repository with only tracked files\n- Repository with only untracked files\n- Repository with no changes\n- Permission errors on file access\n- Symlink handling\n- Binary files\n- Large files\n\n## Components\n\n- RepoIterBuilder: configuration and build\n- RepoIter: iteration logic\n- compute_file_status: status computation\n- next_tracked: tracked file iteration\n- next_untracked: untracked file iteration\n\n## Crosslink\n\nParent: got-enh","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-16T03:07:45.006180431-05:00","updated_at":"2026-01-16T03:07:45.006180431-05:00","dependencies":[{"issue_id":"got-enh-test","depends_on_id":"got-enh","type":"blocks","created_at":"2026-01-16T03:08:11.721146619-05:00","created_by":"daemon"}]}
{"id":"got-goldest-nah","title":"got-goldest-nah: respect nah ignore patterns in goldest","description":"Filter out nah-ignored files from goldest output for better file selection.\n\n## Problem\n\n`got goldest` shows all changed files including untracked files, but doesn't respect the user's nah ignore list. Users may have ignored build artifacts, temporary files, or other patterns they don't want to see.\n\n## Use Case\n\nUser workflow:\n```bash\n# User ignores build artifacts\n$ got nah add target/ --global\nAdded 'target/' to global ignore list\n\n# goldest still shows target/ files\n$ got goldest\ntarget/debug/build.rs 01-16-26T10:30:00Z\nsrc/main.rs 01-15-26T16:20:00Z\n```\n\nThe user shouldn't see `target/debug/` if they've explicitly ignored it.\n\n## Solution\n\nFilter goldest output using nah ignore patterns.\n\n## Implementation\n\n### Option 1: Simple Filter (Quick Win)\n\nAdd `--respect-nah` flag to goldest:\n```rust\n// In goldest.rs\nlet respect_nah = args.respect_nah;\n\nlet mut results: Vec\u003c_\u003e = repo_iter\n    .collect::\u003cResult\u003cVec\u003c_\u003e\u003e\u003e()?;\n\nif respect_nah {\n    let ignored = nah::get_ignored_patterns(None)?;  // Get repo ignores\n    results.retain(|status| {\n        !ignored.iter().any(|pattern| matches_pattern(\u0026status.path, pattern))\n    });\n}\n```\n\n### Option 2: Automatic Integration (Better UX)\n\nAlways respect nah by default when iterating untracked files:\n```rust\n// In goldest.rs\nlet show_untracked = args.untracked.is_some();\nlet mut results: Vec\u003c_\u003e = repo_iter\n    .collect::\u003cResult\u003cVec\u003c_\u003e\u003e\u003e()?;\n\n// Always filter untracked files by nah\nif show_untracked {\n    let ignored = nah::get_ignored_patterns(None)?;\n    results.retain(|status| {\n        status.worktree_status != StatusChar::Untracked ||\n        !ignored.iter().any(|pattern| matches_pattern(\u0026status.path, pattern))\n    });\n}\n```\n\n## Pattern Matching\n\nSimple glob matching for common cases:\n```rust\nfn matches_pattern(path: \u0026str, pattern: \u0026str) -\u003e Result\u003cbool\u003e {\n    // Support: *.tmp, target/, node_modules/, etc.\n    // Full glob matching can be added later\n    if pattern.ends_with('/') {\n        path.starts_with(\u0026pattern.trim_end_matches('/'))\n    } else if pattern.contains('*') {\n        glob_match(path, pattern)\n    } else {\n        path == pattern || path.starts_with(\u0026format!(\"{}/\", pattern))\n    }\n}\n```\n\n## Components\n\n- `/home/rektide/src/got/crate/got/src/commands/goldest.rs` - Add filtering logic\n- `/home/rektide/src/got/crate/nah/src/ignore.rs` - Export get_ignored_patterns()\n- `/home/rektide/src/got/crate/got/src/cli.rs` - Add --respect-nah flag if Option 1\n\n## Benefits\n\n- goldest output respects user's ignore preferences\n- Cleaner output by hiding unwanted files\n- Better integration between got tools\n- More intuitive UX (ignore = don't show)\n\n## Success Criteria\n\n- `got goldest` doesn't show files in nah ignore list\n- Works for both global and repository-specific ignores\n- Optional flag for backward compatibility\n- Pattern matching handles common ignore patterns\n\n## Crosslink\n\nParent: got-nah","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-16T03:36:47.369743059-05:00","updated_at":"2026-01-16T03:36:47.369743059-05:00","dependencies":[{"issue_id":"got-goldest-nah","depends_on_id":"got-nah","type":"blocks","created_at":"2026-01-16T03:36:47.718652751-05:00","created_by":"daemon"}]}
{"id":"got-nah","title":"got-nah: complete pick command implementation","description":"Complete nah pick command and ensure full feature parity for ignore management.\n\n## Overview\n\n`nah` is a file ignore management tool with 5 commands. Currently 4/5 commands work, but `pick` is broken.\n\n## Command Status\n\n| Command | Status | Description |\n|---------|----------|-------------|\n| add | ✅ Working | Add pattern to ignore list (global/repo) |\n| remove | ✅ Working | Remove pattern from ignore list |\n| list | ✅ Working | List all patterns in ignore list |\n| show | ✅ Working | Show path to ignore file |\n| pick | ❌ Broken | Interactive untracked file selection |\n\n## Components\n\n### ignore.rs (Complete)\n- Pattern file management (add/remove/list/show)\n- Global and repository-specific ignore files\n- Pattern parsing and validation\n\n### pick.rs (Incomplete)\n- `get_untracked_files()` - Returns untracked files\n- `display_file_selection()` - Shows numbered list\n- `parse_selection()` - Parses user selection (e.g., \"1,3,5\" or \"1-5\")\n\n### cli.rs (Complete)\n- Nah CLI with all 5 subcommands\n- Global flag support\n\n### commands/nah.rs (Complete)\n- Integration point between got CLI and nah crate\n\n## Work Needed\n\n- Implement `get_untracked_files()` using RepoIter\n- Test pick command end-to-end\n- Ensure integration with ignore patterns\n\n## Success Criteria\n\n- `got nah pick` displays untracked files\n- User can select files interactively\n- Selected files are added to ignore list\n- All 5 nah commands are fully functional","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-16T03:23:37.236401532-05:00","updated_at":"2026-01-16T03:23:37.236401532-05:00"}
{"id":"got-nah-pick","title":"got-nah-pick: implement get_untracked_files using RepoIter","description":"Implement broken get_untracked_files() function in pick.rs to enable nah pick command.\n\n## Problem\n\nThe `got nah pick` command fails with error:\n```\nError: get_untracked_files not implemented yet\n```\n\nThe function at `/home/rektide/src/got/crate/nah/src/pick.rs:3` returns an error:\n```rust\npub fn get_untracked_files() -\u003e Result\u003cVec\u003cString\u003e\u003e {\n    Err(anyhow::anyhow!(\"get_untracked_files not implemented yet\"))\n}\n```\n\n## Solution\n\nImplement `get_untracked_files()` using the new `RepoIter` API to get untracked files from repository.\n\n## Implementation\n\nUse RepoIter with IterMode::Untracked:\n```rust\nuse gixkit::{RepoIterBuilder, IterMode};\nuse std::sync::Arc;\n\npub fn get_untracked_files() -\u003e Result\u003cVec\u003cString\u003e\u003e {\n    let repo = Arc::new(gixkit::open_repo(\".\")?);\n    \n    let files: Vec\u003cString\u003e = RepoIterBuilder::new(Arc::clone(\u0026repo))\n        .mode(IterMode::Untracked)\n        .build()?\n        .filter_map(|r| r.ok())\n        .map(|status| status.path)\n        .collect();\n    \n    Ok(files)\n}\n```\n\n## Dependencies\n\n- Requires gixkit::RepoIter (already available)\n- Uses IterMode::Untracked enum\n\n## Testing\n\nAfter implementation, test:\n- `got nah pick` displays untracked files\n- User can select files by number\n- Selected files are added to ignore list\n- Works with both repository and global ignore lists\n\n## Components\n\n- `/home/rektide/src/got/crate/nah/src/pick.rs` - Target file\n- `get_untracked_files()` - Function to implement\n- `display_file_selection()` - Already working\n- `parse_selection()` - Already working\n- `/home/rektide/src/got/crate/nah/src/cli.rs` - Calls execute_pick()\n\n## Crosslink\n\nParent: got-nah","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-16T03:23:56.33929508-05:00","updated_at":"2026-01-16T03:23:56.33929508-05:00","dependencies":[{"issue_id":"got-nah-pick","depends_on_id":"got-nah","type":"blocks","created_at":"2026-01-16T03:23:56.846874289-05:00","created_by":"daemon"}]}
{"id":"got-wqs","title":"nah: complete pick command implementation","description":"Complete nah pick command and ensure full feature parity for ignore management.\n\n## Overview\n\n`nah` is a file ignore management tool with 5 commands. Currently 4/5 commands work, but `pick` is broken.\n\n## Command Status\n\n| Command | Status | Description |\n|---------|----------|-------------|\n| add | ✅ Working | Add pattern to ignore list (global/repo) |\n| remove | ✅ Working | Remove pattern from ignore list |\n| list | ✅ Working | List all patterns in ignore list |\n| show | ✅ Working | Show path to ignore file |\n| pick | ❌ Broken | Interactive untracked file selection |\n\n## Components\n\n### ignore.rs (Complete)\n- Pattern file management (add/remove/list/show)\n- Global and repository-specific ignore files\n- Pattern parsing and validation\n\n### pick.rs (Incomplete)\n- `get_untracked_files()` - Returns untracked files\n- `display_file_selection()` - Shows numbered list\n- `parse_selection()` - Parses user selection (e.g., \"1,3,5\" or \"1-5\")\n\n### cli.rs (Complete)\n- Nah CLI with all 5 subcommands\n- Global flag support\n\n### commands/nah.rs (Complete)\n- Integration point between got CLI and nah crate\n\n## Work Needed\n\n- Implement `get_untracked_files()` using RepoIter\n- Test pick command end-to-end\n- Ensure integration with ignore patterns\n\n## Success Criteria\n\n- `got nah pick` displays untracked files\n- User can select files interactively\n- Selected files are added to ignore list\n- All 5 nah commands are fully functional","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-16T03:17:27.241111768-05:00","updated_at":"2026-01-16T03:17:27.241111768-05:00"}
{"id":"got-wqs-pick","title":"got-wqs-pick: implement get_untracked_files using RepoIter","description":"Implement the broken get_untracked_files() function in pick.rs to enable nah pick command.\n\n## Problem\n\nThe `got nah pick` command fails with error:\n```\nError: get_untracked_files not implemented yet\n```\n\nThe function at `/home/rektide/src/got/crate/nah/src/pick.rs:3` returns an error:\n```rust\npub fn get_untracked_files() -\u003e Result\u003cVec\u003cString\u003e\u003e {\n    Err(anyhow::anyhow!(\"get_untracked_files not implemented yet\"))\n}\n```\n\n## Solution\n\nImplement `get_untracked_files()` using the new `RepoIter` API to get untracked files from the repository.\n\n## Implementation\n\nUse RepoIter with IterMode::Untracked:\n```rust\nuse gixkit::{RepoIterBuilder, IterMode};\nuse std::sync::Arc;\n\npub fn get_untracked_files() -\u003e Result\u003cVec\u003cString\u003e\u003e {\n    let repo = Arc::new(gixkit::open_repo(\".\")?);\n    \n    let files: Vec\u003cString\u003e = RepoIterBuilder::new(Arc::clone(\u0026repo))\n        .mode(IterMode::Untracked)\n        .build()?\n        .filter_map(|r| r.ok())\n        .map(|status| status.path)\n        .collect();\n    \n    Ok(files)\n}\n```\n\n## Dependencies\n\n- Requires gixkit::RepoIter (already available)\n- Uses IterMode::Untracked enum\n\n## Testing\n\nAfter implementation, test:\n- `got nah pick` displays untracked files\n- User can select files by number\n- Selected files are added to ignore list\n- Works with both repository and global ignore lists\n\n## Components\n\n- `/home/rektide/src/got/crate/nah/src/pick.rs` - Target file\n- `get_untracked_files()` - Function to implement\n- `display_file_selection()` - Already working\n- `parse_selection()` - Already working\n- `/home/rektide/src/got/crate/nah/src/cli.rs` - Calls execute_pick()\n\n## Crosslink\n\nParent: got-wqs","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-16T03:17:50.133295936-05:00","updated_at":"2026-01-16T03:17:50.133295936-05:00","dependencies":[{"issue_id":"got-wqs-pick","depends_on_id":"got-wqs","type":"blocks","created_at":"2026-01-16T03:17:58.92679509-05:00","created_by":"daemon"}]}
